(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{457:function(t,e,n){var content=n(464);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(58).default)("6b43e513",content,!0,{sourceMap:!1})},458:function(t,e,n){var content=n(466);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(58).default)("2b6a20da",content,!0,{sourceMap:!1})},463:function(t,e,n){"use strict";var o=n(457);n.n(o).a},464:function(t,e,n){(e=n(57)(!1)).push([t.i,".loading[data-v-3d40f285]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#fff;z-index:1000;position:fixed;display:flex;align-items:center;align-content:center;justify-content:center;-webkit-perspective:300px;perspective:300px;transition:0s linear}.loading .icon[data-v-3d40f285]{width:14px;height:140px;position:relative;transition:.6s cubic-bezier(.4,.4,0,1);-webkit-transform:rotate(45deg);transform:rotate(45deg)}.loading .icon .back[data-v-3d40f285]{top:0;background:#f1f1f1}.loading .icon .back[data-v-3d40f285],.loading .icon .front[data-v-3d40f285]{position:absolute;left:0;width:14px;height:140px;border-radius:3px}.loading .icon .front[data-v-3d40f285]{bottom:0;background:linear-gradient(0deg,#f05,#f94cff);clip:rect(10px,14px,140px,0);background-position:bottom}.loading.v-enter .icon .front[data-v-3d40f285]{clip:rect(140px,14px,140px,0)}.loading.v-enter-active .icon .front[data-v-3d40f285]{transition:5s cubic-bezier(.31,.13,0,1)}.loading.v-leave-active[data-v-3d40f285],.loading.v-leave-active .icon[data-v-3d40f285]{transition:.8s cubic-bezier(.4,.4,0,1) .1s}.loading.v-leave-active .icon .front[data-v-3d40f285]{transition:.6s cubic-bezier(.4,.4,0,1)}.loading.v-leave-to[data-v-3d40f285]{background-color:hsla(0,0%,100%,0)}.loading.v-leave-to .icon[data-v-3d40f285]{-webkit-transform:scale(2) rotate(45deg);transform:scale(2) rotate(45deg);opacity:0}.loading.v-leave-to .icon .front[data-v-3d40f285]{clip:rect(0,16px,160px,0)}",""]),t.exports=e},465:function(t,e,n){"use strict";var o=n(458);n.n(o).a},466:function(t,e,n){(e=n(57)(!1)).push([t.i,".container[data-v-65fe18e1]{transition:none}.container.page-enter[data-v-65fe18e1],.container.page-leave-to[data-v-65fe18e1]{opacity:0}.container.page-enter-active[data-v-65fe18e1],.container.page-leave-active[data-v-65fe18e1]{transition:.3s cubic-bezier(.4,.4,0,1)}",""]),t.exports=e},473:function(t,e,n){"use strict";n.r(e);n(12),n(24),n(16),n(13),n(25),n(26),n(20),n(14);var o=n(8),r=n(2),c=(n(41),n(3)),d=n(1),l=n(262),f=n(202),v=d.default.extend({name:"Loading"}),h=(n(463),n(6)),m=Object(h.a)(v,(function(){var t=this.$createElement,e=this._self._c||t;return e("transition",[e("div",{staticClass:"loading"},[e("div",{staticClass:"icon"},[e("div",{staticClass:"back"}),e("div",{staticClass:"front"})])])])}),[],!1,null,"3d40f285",null).exports,j=n(203),x=n(71),O=n(46),y=n(178),w=n(123),k=n(288);function C(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function R(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?C(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):C(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var P=function(t){return{name:t.project_name,type:t.project_type,customDomain:t.custom_domain,displayBadge:t.project_display_badge,id:t.project_id,integrations:[]}},_=d.default.extend({components:{RenderCanvas:f.a,Loading:m,FormMessage:j.a},data:function(){return{isLoading:!1,cmsContent:null,unsubscribe:null}},computed:{basePath:function(){return"/live/".concat(this.$route.params.previewId)},isConnected:function(){return this.$store.getters["product/isLoaded"]},project:function(){return this.$store.getters["project/project"]},product:function(){return this.$store.getters["product/product"]},selectedRoute:function(){var t=this.product;return t&&Object(O.b)(t.pages,this.$route.params.pageId)},params:function(){return this.selectedRoute&&this.selectedRoute.params},rssMap:function(){return this.$store.getters["product/rssMap"]}},watch:{selectedRoute:{handler:function(t){t&&this.updateCmsContent()},immediate:!0}},mounted:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var n,o,r,c,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isConnected){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,t.isLoading=!0,e.next=6,l.a.getToken(t.$route.params.previewId);case 6:return n=e.sent.data,o=n.token,r=n.preview,c=P(r),t.$store.commit("project/setProject",{project:c}),d=Object(y.a)(),e.next=14,d.auth().signInWithCustomToken(o);case 14:d.database().ref("/v2/projects/".concat(c.id,"/design")).on("value",(function(e){if(e){var n=e.val();t.$store.dispatch("product/setProduct",{product:R({fonts:[],colors:[],breakPoints:[]},Object(w.b)(n))}),t.$store.dispatch("CmsStore/init")}})),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),console.error(e.t0);case 21:return e.prev=21,t.isLoading=!1,e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[2,18,21,24]])})))()},beforeDestroy:function(){this.unsubscribe&&this.unsubscribe()},methods:{updateCmsContent:function(){var t,e=this;if(this.selectedRoute){var n=this.selectedRoute,o=n.page,r=n.params;if(o.cmsRequest){var c={params:r},d=Object(x.a)(o.cmsRequest.contentSlug,{$route:c}),l=null===(t=o.cmsRequest)||void 0===t?void 0:t.schemaKey;Object(k.a)(o.id,(function(t){e.cmsContent=t[0]}),{path:{schemaKey:l,contentSlug:d}},!1)}}}},head:function(){if(!this.selectedRoute)return{};var t=this.selectedRoute.page,e=this.project,n=this.product,r=Object(O.c)(e,n,t);return R({},r,{meta:[].concat(Object(o.a)(r.meta),[{hid:"robots",name:"robots",content:"noindex"}])})}}),$=(n(465),Object(h.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("client-only",[n("section",{staticClass:"container"},[t.selectedRoute?[n("FormMessage"),t._v(" "),n("RenderCanvas",{attrs:{isPreview:!0,basePath:t.basePath,selectedRoute:t.selectedRoute,displayBadge:t.project.displayBadge,rssMap:t.rssMap,cmsContent:t.cmsContent}})]:t._e(),t._v(" "),n("transition",[t.isLoading?n("Loading"):t._e()],1)],2)])}),[],!1,null,"65fe18e1",null));e.default=$.exports}}]);